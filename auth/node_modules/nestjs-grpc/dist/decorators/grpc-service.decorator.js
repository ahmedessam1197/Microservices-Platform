"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GrpcService = GrpcService;
exports.InjectGrpcClient = InjectGrpcClient;
const common_1 = require("@nestjs/common");
const constants_1 = require("../constants");
function GrpcService(serviceNameOrOptions) {
    const options = typeof serviceNameOrOptions === 'string'
        ? { serviceName: serviceNameOrOptions }
        : serviceNameOrOptions;
    if (!options.serviceName || typeof options.serviceName !== 'string') {
        throw new Error('Service name is required and must be a string');
    }
    if (options.serviceName.trim().length === 0) {
        throw new Error('Service name cannot be empty');
    }
    return (target) => {
        if (!target || typeof target !== 'function') {
            throw new Error('@GrpcService can only be applied to classes');
        }
        (0, common_1.SetMetadata)(constants_1.GRPC_SERVICE_METADATA, options)(target);
        return target;
    };
}
function InjectGrpcClient(serviceName) {
    if (!serviceName || typeof serviceName !== 'string') {
        throw new Error('Service name is required and must be a string for @InjectGrpcClient');
    }
    if (serviceName.trim().length === 0) {
        throw new Error('Service name cannot be empty for @InjectGrpcClient');
    }
    const token = `${constants_1.GRPC_CLIENT_TOKEN_PREFIX}${serviceName}`;
    return (0, common_1.Inject)(token);
}
//# sourceMappingURL=grpc-service.decorator.js.map