import type { GrpcErrorCode } from '../constants';
import type { Options } from '@grpc/proto-loader';
import type { DynamicModule, ModuleMetadata, Provider, Type, LogLevel } from '@nestjs/common';
export interface GrpcLoggerOptions {
    enabled?: boolean;
    level?: LogLevel;
    context?: string;
    logErrors?: boolean;
    logPerformance?: boolean;
    logDetails?: boolean;
}
export interface GrpcLoggingOptions {
    enabled?: boolean;
    level?: LogLevel;
    context?: string;
    logErrors?: boolean;
    logPerformance?: boolean;
    logDetails?: boolean;
}
export interface GrpcOptions {
    protoPath: string;
    package: string;
    url?: string;
    secure?: boolean;
    rootCerts?: Buffer;
    privateKey?: Buffer;
    certChain?: Buffer;
    maxSendMessageSize?: number;
    maxReceiveMessageSize?: number;
    loaderOptions?: Options;
    logging?: GrpcLoggingOptions;
}
export interface GrpcClientOptions {
    service: string;
    package?: string;
    protoPath?: string;
    url?: string;
    maxRetries?: number;
    retryDelay?: number;
    secure?: boolean;
    rootCerts?: Buffer;
    privateKey?: Buffer;
    certChain?: Buffer;
    timeout?: number;
    channelOptions?: Record<string, any>;
}
export interface GrpcOptionsFactory {
    createGrpcOptions(): Promise<GrpcOptions> | GrpcOptions;
}
export interface GrpcModuleAsyncOptions extends Pick<ModuleMetadata, 'imports' | 'providers'> {
    useFactory?: (...args: any[]) => Promise<GrpcOptions> | GrpcOptions;
    useClass?: Type<GrpcOptionsFactory>;
    useExisting?: Type<GrpcOptionsFactory>;
    inject?: any[];
}
export interface GrpcFeatureOptions {
    services?: Type<any>[];
    providers?: Provider[];
    imports?: Array<Type<any> | DynamicModule>;
    exports?: Array<Type<any> | string | symbol>;
    serviceRegistrations?: GrpcServiceRegistrationConfig[];
}
export interface GrpcLocalServiceConfig {
    protoPath: string;
    package: string;
    url?: string;
    logging?: GrpcLoggingOptions;
    options?: {
        secure?: boolean;
        rootCerts?: Buffer;
        privateKey?: Buffer;
        certChain?: Buffer;
        maxSendMessageSize?: number;
        maxReceiveMessageSize?: number;
    };
}
export interface GrpcServiceRegistrationConfig {
    serviceName: string;
    package: string;
    protoPath: string;
    url: string;
    options?: {
        secure?: boolean;
        rootCerts?: Buffer;
        privateKey?: Buffer;
        certChain?: Buffer;
        maxSendMessageSize?: number;
        maxReceiveMessageSize?: number;
        timeout?: number;
        maxRetries?: number;
        retryDelay?: number;
    };
}
export interface GrpcMethodOptions {
    methodName?: string;
    streaming?: boolean;
    timeout?: number;
}
export interface GrpcControllerOptions {
    serviceName: string;
    package?: string;
    url?: string;
}
export interface GrpcServiceOptions {
    serviceName: string;
    package?: string;
    url?: string;
    clientOptions?: Partial<GrpcClientOptions>;
}
export interface GrpcExceptionOptions {
    code: GrpcErrorCode;
    message: string;
    details?: any;
    metadata?: Record<string, string | Buffer | string[] | Buffer[]>;
}
export interface GenerateCommandOptions {
    proto: string;
    output: string;
    watch: boolean;
    recursive?: boolean;
    classes?: boolean;
    comments?: boolean;
    packageFilter?: string;
    verbose?: boolean;
    silent?: boolean;
    noClientInterfaces?: boolean;
}
export interface ControllerMetadata {
    serviceName: string;
    package?: string;
    url?: string;
    methods: Map<string, GrpcMethodOptions>;
}
export interface ServiceClientMetadata {
    serviceName: string;
    package?: string;
    url?: string;
    clientOptions?: Partial<GrpcClientOptions>;
}
export interface GrpcErrorResponse {
    code: number;
    message: string;
    details?: any;
    metadata?: any;
}
export interface GrpcExceptionFilterOptions {
    enableLogging?: boolean;
    maxMessageLength?: number;
    fallbackMessage?: string;
    fallbackCode?: number;
}
export interface GrpcErrorDetails {
    value?: string;
    error?: string;
    httpStatus?: number;
    [key: string]: any;
}
export interface HttpToGrpcStatusMapping {
    httpStatus: number;
    grpcStatus: number;
    description?: string;
}
export interface GrpcFeatureAsyncOptions extends Pick<ModuleMetadata, 'imports' | 'providers'> {
    useFactory?: (...args: any[]) => Promise<GrpcFeatureOptions> | GrpcFeatureOptions;
    useClass?: Type<any>;
    useExisting?: Type<any>;
    inject?: any[];
}
export interface GrpcConsumerOptions {
    serviceName: string;
    protoPath: string;
    package: string;
    url: string;
    secure?: boolean;
    rootCerts?: Buffer;
    privateKey?: Buffer;
    certChain?: Buffer;
    timeout?: number;
    maxRetries?: number;
    retryDelay?: number;
    loaderOptions?: Options;
    logging?: GrpcLoggingOptions;
    channelOptions?: Record<string, any>;
}
export interface GrpcConsumerOptionsFactory {
    createGrpcConsumerOptions(): Promise<GrpcConsumerOptions> | GrpcConsumerOptions;
}
export interface GrpcConsumerModuleAsyncOptions extends Pick<ModuleMetadata, 'imports' | 'providers'> {
    useFactory?: (...args: any[]) => Promise<GrpcConsumerOptions> | GrpcConsumerOptions;
    useClass?: Type<GrpcConsumerOptionsFactory>;
    useExisting?: Type<GrpcConsumerOptionsFactory>;
    inject?: any[];
}
export interface GrpcConsumerMethodOptions {
    timeout?: number;
    maxRetries?: number;
    retryDelay?: number;
    enableDetailedLogging?: boolean;
}
export interface GrpcConsumerError {
    code: number;
    message: string;
    serviceName: string;
    methodName: string;
    details?: any;
    metadata?: any;
    timestamp: Date;
    duration: number;
}
